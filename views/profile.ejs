<% layout('layouts/boilerplate') -%>
<h1><%=currentUser.username%>'s Profile</h1>

<p>Recent Posts</p>

<%posts.forEach((post)=>{%>
    <div><a href='/posts/<%= post.id%>'><%=post.title%></a></div>
<%})%>

<p>Update Info:</p>
<form action='/profile?_method=PUT' method='POST'>
    <div>
        <label for='username'>Username:</label>
        <input type='text' id='username' name='username' placeholder='Username' value='<%=currentUser.username%>' autofocus required>
    </div>
    <div>
        <label for='currentPassword'>Current password (required to update profile):</label>
        <input type='password' id='currentPassword' name='currentPassword' placeholder='password' required>
    </div>
    <div>
        <label for='newPassword'>New password</label>
        <input type='password' id='newPassword' name='newPassword' placeholder='new password'>
    </div>
    <div>
        <label for='confirmPassword'>Confirm Password:</label>
        <input type='password' id='confirmPassword' name='confirmPassword' placeholder='confirm password'>
    </div>
    <div id='validation-message'></div>
    <div>
        <label for='email'>Email:</label>
        <input type='text' id='email' name='email' value='<%=currentUser.email%>'>
    </div>
    <div>
        <label for='image'>Image:</label>
        <input type='file' id='image' name='image' >
    </div>
    <div>
        <input type='submit' id='updateProfile'>
    </div>
</form>
<script src='/javascripts/profile.js'></script>